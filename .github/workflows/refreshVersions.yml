# This file was generated using Kotlin DSL (refreshVersions.main.kts).
# If you want to modify the workflow, please change the Kotlin file and regenerate this YAML file.
# Generated with https://github.com/krzema12/github-actions-kotlin-dsl

name: RefreshVersions PR

on:
    workflow_dispatch:
    schedule:
        -   cron: '0 7 * * 1'

jobs:
    "Refresh-Versions":
        runs-on: "ubuntu-latest"
        steps:
            -   name: Check out
                uses: actions/checkout@v2
                with:
                    ref: main
            -   name: setup-java
                uses: actions/setup-java@v2
                with:
                    distribution: adopt
                    java-version: 11
            -   name: create-branch
                uses: peterjgrainger/action-create-branch@v2
                with:
                    branch: dependency-update
                env:
                    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            -   name: refreshVersions
                uses: gradle/gradle-build-action@v2
                with:
                    arguments: refreshVersions
            -   name: Commit
                uses: EndBug/add-and-commit@v8
                with:
                    author_name: GitHub Actions
                    author_email: noreply@github.com
                    message: Refresh versions.properties
                    new_branch: dependency-update
            -   name: Pull Request
                uses: repo-sync/pull-request@v2
                with:
                    source_branch: dependency-update
                    destination_branch: main
                    pr_title: Upgrade gradle dependencies
                    pr_draft: true
                    github_token: ${{ secrets.GITHUB_TOKEN }}
